# Как проверить офлайн-режим

## Шаг 1: Подготовка
1. Откройте приложение в браузере: `http://localhost:3003`
2. Войдите в систему (dev login или через Telegram)
3. Убедитесь, что видите карточки на странице `/cards`
4. Подождите несколько секунд, чтобы данные синхронизировались с IndexedDB

## Шаг 2: Переход в офлайн-режим

### Вариант 1: Через DevTools (рекомендуется)
1. Откройте DevTools (F12)
2. Перейдите на вкладку "Network"
3. В выпадающем списке "Throttling" выберите "Offline"
4. Или установите чекбокс "Offline"

### Вариант 2: Остановить backend
```bash
docker compose -f docker-compose.dev.yml stop backend
```

### Вариант 3: Отключить интернет
- Отключите Wi-Fi/сеть на компьютере

## Шаг 3: Проверка работы

После перехода в офлайн:

1. **Индикатор офлайн-режима**
   - Вверху страницы должен появиться красный индикатор "⚠ Работа в офлайн-режиме"

2. **Просмотр карточек**
   - Откройте страницу `/cards`
   - Карточки должны загружаться из IndexedDB
   - Все карточки должны быть видны

3. **Создание карточки**
   - Создайте новую карточку
   - Она должна сохраниться локально
   - Появится сообщение "Карточка добавлена (офлайн)!"

4. **Редактирование карточки**
   - Отредактируйте существующую карточку
   - Изменения сохранятся локально

5. **Удаление карточки**
   - Удалите карточку
   - Она удалится из локального хранилища

6. **Практика**
   - Откройте страницу `/practice`
   - Карточки для практики должны загружаться из IndexedDB

## Шаг 4: Синхронизация

После восстановления подключения:

1. **Автоматическая синхронизация**
   - При восстановлении интернета данные автоматически синхронизируются
   - Индикатор изменится на зеленый "✓ Подключено к интернету"

2. **Проверка синхронизации**
   - Откройте DevTools → Application → IndexedDB → CardsAppDB
   - Проверьте, что отложенные действия (`pendingActions`) синхронизировались

## Отладка

Если что-то не работает:

1. **Проверьте IndexedDB**
   - DevTools → Application → IndexedDB → CardsAppDB
   - Должны быть таблицы: `cards`, `groups`, `statistics`, `pendingActions`

2. **Проверьте Service Worker**
   - DevTools → Application → Service Workers
   - Должен быть зарегистрирован Service Worker

3. **Проверьте консоль**
   - DevTools → Console
   - Ищите сообщения с префиксом `[IndexedDB]`, `[SYNC]`, `[OFFLINE]`

4. **Очистите кеш**
   - DevTools → Application → Storage → Clear site data
   - Перезагрузите страницу

# Отладка проверки хеша Telegram авторизации

## Проблема
Ошибка "Invalid Telegram authentication data" все еще возникает после исправления фильтрации undefined/null значений.

## Добавлено логирование

Добавлено детальное логирование в метод `verifyTelegramAuth` для отладки:
- `dataCheckString` - строка, используемая для проверки хеша
- `receivedHash` - хеш, полученный от Telegram
- `calculatedHash` - хеш, вычисленный на сервере
- `match` - результат сравнения
- `botTokenPrefix` - первые 10 символов токена (для проверки)

## Как проверить

1. Попробуйте авторизоваться через Telegram
2. Проверьте логи backend:

```bash
docker-compose logs backend --tail 50 | grep -A 10 "TELEGRAM AUTH DEBUG"
```

3. Пришлите логи, чтобы увидеть:
   - Какая `dataCheckString` формируется
   - Какой хеш вычисляется
   - Почему они не совпадают

## Возможные причины

1. **Неправильный домен в BotFather** - если домен не настроен правильно, Telegram может использовать другой алгоритм проверки
2. **Неправильный порядок полей** - возможно, порядок полей в dataCheckString должен быть другим
3. **Проблема с форматом данных** - возможно, некоторые поля нужно обрабатывать по-другому

## Следующие шаги

После получения логов можно будет точно определить проблему и исправить её.

